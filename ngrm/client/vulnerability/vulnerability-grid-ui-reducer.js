import * as types from './vulnerability-action-types'

export const initState = {
  exportDropdownIsOpen: false,
  importButtonIsVisible: true,
  importFormIsVisible: false,
  importSummaryIsVisible: false,
  importProcessing: false,
  importFailed: false,
  selectedItemActionsDropdownIsOpen: false,
  assignRiskFormIsVisible: false
}

const vulnerabilityGridUIReducer = (state = initState, action) => {
  switch (action.type) {
    case types.VULN_IMPORT_CLICK:
      return {
        ...state,
        importButtonIsVisible: false,
        importFormIsVisible: true,
        importSummaryIsVisible: false,
        importProcessing: false
      }
    case types.VULN_POST_IMPORT_FETCHING:
      return {
        ...state,
        importButtonIsVisible: false,
        importFormIsVisible: false,
        importSummaryIsVisible: false,
        importProcessing: true,
        importFailed: false
      }
    case types.VULN_POST_IMPORT_SUCCESS:
      return {
        ...state,
        importButtonIsVisible: false,
        importFormIsVisible: false,
        importSummaryIsVisible: true,
        importProcessing: false,
        importFailed: false
      }
    case types.VULN_POST_IMPORT_FAILED:
      return {
        ...state,
        importButtonIsVisible: false,
        importFormIsVisible: false,
        importSummaryIsVisible: true,
        importProcessing: false,
        importFailed: true
      }
    case types.VULN_IMPORT_SUMMARY_CLOSE:
      return {
        ...state,
        importButtonIsVisible: !state.importFailed,
        importFormIsVisible: state.importFailed,
        importSummaryIsVisible: false,
        importProcessing: false
      }
    case types.VULN_IMPORT_CANCEL:
      return {
        ...state,
        importButtonIsVisible: true,
        importFormIsVisible: false,
        importSummaryIsVisible: false,
        importProcessing: false,
        importFailed: false
      }
    case types.VULN_EXPORT_DROPDOWN_CLICK:
      return {
        ...state,
        exportDropdownIsOpen: !state.exportDropdownOpenIsOpen
      }
    case types.VULN_EXPORT_DROPDOWN_MOUSE_LEAVE:
    case types.VULN_POST_EXPORT_SUCCESS:
      return {
        ...state,
        exportDropdownIsOpen: false
      }
    case types.VULN_SELECTED_ITEM_ACTIONS_DROPDOWN_CLICK:
      return {
        ...state,
        selectedItemActionsDropdownIsOpen: !state.selectedItemActionsDropdownIsOpen
      }
    case types.VULN_SELECTED_ITEM_ACTIONS_DROPDOWN_MOUSE_LEAVE:
      return {
        ...state,
        selectedItemActionsDropdownIsOpen: false
      }
    case types.VULN_SELECTED_ITEM_ACTIONS_CLEAR:
    case types.VULN_SELECTED_ITEM_ACTIONS_CREATE:
      return {
        ...state,
        selectedItemActionsDropdownIsOpen: false
      }
    case types.VULN_SELECTED_ITEM_ACTIONS_ASSIGN:
      return {
        ...state,
        selectedItemActionsDropdownIsOpen: false,
        assignRiskFormIsVisible: true
      }
    case types.VULN_SELECT_ALL_CLICK:
    case types.VULN_SELECT_ROW_CLICK:
    case types.VULN_ASSIGN_RISK_CANCEL:
      return {
        ...state,
        assignRiskFormIsVisible: false
      }
    default:
      return state
  }
}

export default vulnerabilityGridUIReducer